########################################################################
########################################################################
# Makefile for bootstrapping
########################################################################
########################################################################
CAT=cat
ECHO=echo
NODE=node
########################################################################
SRCGEN2=./../../../../srcgen2
XATS2JS=./../../../../srcgen2/xats2js
########################################################################
LIBXATSOPT_JS="./../lib/libxatsopt.js"
########################################################################
XATS2JS_JS1EMIT="$(SRCGEN2_XSHARED)/xats2js_js1emit.js"
XATS2JS_PRELUDE="$(SRCGEN2_XSHARED)/xats2js_prelude.js"
XATS2JS_PRELUDE_NODE="$(SRCGEN2_XSHARED)/xats2js_prelude_node.js"
########################################################################
########################################################################
boot:: \
xatsopt_tcheck00_dats
xatsopt_tcheck00_dats: ; \
$(CAT) \
$(XATS2JS_JS1EMIT) > $@_out.js && \
$(CAT) \
$(XATS2JS_PRELUDE) >> $@_out.js && \
$(CAT) \
$(XATS2JS_PRELUDE_NODE) >> $@_out.js && \
$(CAT) $(LIBXATSOPT_JS) >> $@_out.js && \
$(NODE) --stack-size=4096 \
$(XATS2JS_JSEMIT00) $(SRCGEN2)/UTIL/xatsopt_tcheck00.dats >> $@_out.js
########################################################################
########################################################################
clean:: ; rm -f *~
cleanall:: ; rm -f *~
########################################################################
cleanall:: ; rm -f xatsopt_tcheck00_dats_out.js
########################################################################
########################################################################
SRCGEN2_XSHARED=$(SRCGEN2)/xats2js/srcgenx/xshared/runtime
########################################################################
XATSOPT_TCHECK00=$(SRCGEN2)/UTIL/xatsopt_tcheck00_dats.js
XATS2JS_JSEMIT00=$(XATS2JS)/srcgen1/UTIL/xats2js_jsemit00_dats.js
########################################################################
########################################################################
