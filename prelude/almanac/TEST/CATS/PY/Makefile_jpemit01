########################################################################
########################################################################
# Makefile for PY-emission
########################################################################
########################################################################
CAT=cat
ECHO=echo
PRINTF=printf
########################################################################
BUN=bun
NODE=node
PYTHON=python3
########################################################################
MYROOT="./../../../../.."
########################################################################
all:: test00
all:: test01
########################################################################
clean:: ; rm -f *~
cleanall:: ; rm -f *~
cleanall:: ; rm -f OUTS/test??_out.py
cleanall:: ; rm -f OUTS/test??_out?.py
########################################################################
testall:: test00; $(PYTHON) OUTS/$<_out.py
testall:: test01; $(PYTHON) OUTS/$<_out.py
########################################################################
########################################################################
XATS2PY_RUNTIME=\
$(MYROOT)/srcgen2/xats2py/srcgenx/xshared/runtime
XATS2PY_PYEMIT01=\
$(MYROOT)/srcgen2/xats2py/srcgenx/UTIL/xats2py_pyemit01_ats2.js
XATS2PY_PYEMIT01=\
$(MYROOT)/srcgen2/xats2py/srcgenx/UTIL/xats2py_pyemit01_ats3.js
########################################################################
########################################################################
test00:: ; \
printf "## %s\n" "`date`" > OUTS/$@_out.py
############
test00:: ; \
$(CAT) $(XATS2PY_RUNTIME)/xats2py_py1emit.py >> OUTS/$@_out.py
test00:: ; \
$(CAT) $(XATS2PY_RUNTIME)/srcgen2_prelude.py >> OUTS/$@_out.py
############
test00:: \
test00_pre2026.dats; \
$(NODE) --stack-size=8192 $(XATS2PY_PYEMIT01) $< >> OUTS/$@_out.py
########################################################################
test01:: ; \
printf "## %s\n" "`date`" > OUTS/$@_out.py
############
test01:: ; \
$(CAT) $(XATS2PY_RUNTIME)/xats2py_py1emit.py >> OUTS/$@_out.py
test01:: ; \
$(CAT) $(XATS2PY_RUNTIME)/srcgen2_precats.py >> OUTS/$@_out.py
test01:: ; \
$(CAT) $(XATS2PY_RUNTIME)/srcgen2_prelude.py >> OUTS/$@_out.py
############
test01:: \
test01_pre2026.dats; \
$(NODE) --stack-size=8192 $(XATS2PY_PYEMIT01) $< >> OUTS/$@_out.py
########################################################################
########################################################################
##################### end of [Makefile_jpemit01] #######################
########################################################################
