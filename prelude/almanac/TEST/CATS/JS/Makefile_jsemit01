########################################################################
########################################################################
# Makefile for JS-emission
########################################################################
########################################################################
CAT=cat
ECHO=echo
PRINTF=printf
########################################################################
BUN=bun
NODE=node
PYTHON=python3
########################################################################
########################################################################
all:: test00
########################################################################
clean:: ; rm -f *~
cleanall:: ; rm -f *~
cleanall:: ; rm -f OUTS/test??_out.js
cleanall:: ; rm -f OUTS/test??_out?.js
########################################################################
testall:: test00; $(NODE) OUTS/$<_out.js
########################################################################
########################################################################
MYROOT="./../../../../.."
########################################################################
SRCGEN2_XSHARED=\
$(MYROOT)/srcgen2/xats2js/srcgenx/xshared/runtime
SRCGEN2_XATS2JS=\
$(MYROOT)/srcgen2/xats2js/srcgenx/UTIL/xats2js_jsemit01_ats2.js
SRCGEN2_XATS2JS=\
$(MYROOT)/srcgen2/xats2js/srcgenx/UTIL/xats2js_jsemit01_ats3.js
########################################################################
########################################################################
test00:: ; \
printf "// %s\n" "`date`" > OUTS/$@_out.js
############
test00:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
test00:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
############
test00:: \
test00_pre2026.dats; \
$(NODE) --stack-size=8192 $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
########################################################################
test01:: ; \
printf "// %s\n" "`date`" > OUTS/$@_out.js
############
test01:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
test01:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
############
test01:: \
test01_pre2026.dats; \
$(NODE) --stack-size=8192 $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
########################################################################
##################### end of [Makefile_jsemit01] #######################
