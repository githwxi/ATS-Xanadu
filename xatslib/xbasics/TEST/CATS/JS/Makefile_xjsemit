########################################################################
########################################################################
# Makefile for JS-emission
########################################################################
########################################################################
CAT=cat
ECHO=echo
NODE=node
########################################################################
########################################################################
all:: testxx
########################################################################
all:: test00
all:: test01
all:: test02
all:: test99
########################################################################
########################################################################
testxx:: ; \
echo "//" `date` > OUTS/$@_out.js
############
testxx:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
testxx:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
testxx:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_xatslib.js >> OUTS/$@_out.js
############
testxx:: ; $(CAT) \
$(MYROOT)/prelude/DATS/CATS/JS/NODE/node000.cats >> OUTS/$@_out.js
############
testxx:: \
testxx_mydebug.dats; \
$(NODE)  --stack-size=8001  $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
########################################################################
########################################################################
testall:: test00; $(NODE) $<_out.js
testall:: test01; $(NODE) $<_out.js
testall:: test02; $(NODE) $<_out.js
testall:: test99; $(NODE) $<_out.js
########################################################################
testall1:: test00; $(NODE) $<_out1.js
########################################################################
testall2:: test00; $(NODE) $<_out2.js
########################################################################
########################################################################
MYROOT=\
"./../../../../.."
########################################################################
SRCGEN2_SRCGENX=\
$(MYROOT)/srcgen2/xats2js/srcgenx
SRCGEN2_XSHARED=\
$(MYROOT)/srcgen2/xats2js/srcgenx/xshared/runtime
SRCGEN2_XATS2JS=\
$(MYROOT)/srcgen2/xats2js/srcgenx/UTIL/xats2js_jsemit01_ats2.js
SRCGEN2_XATS2JS=\
$(MYROOT)/srcgen2/xats2js/srcgenx/UTIL/xats2js_jsemit01_ats3.js
########################################################################
########################################################################
test00:: ; \
echo "//" `date` > OUTS/$@_out.js
############
test00:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
test00:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
test00:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_xatslib.js >> OUTS/$@_out.js
############
test00:: \
test00_xbasics.dats; \
$(NODE) --stack-size=8001 $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
############
test00:: ; \
npx google-closure-compiler -W QUIET \
  --compilation_level SIMPLE --js=OUTS/$@_out.js --js_output_file=OUTS/$@_out1.js
############
test00:: ; \
npx google-closure-compiler -W QUIET \
  --compilation_level ADVANCED --js=OUTS/$@_out.js --js_output_file=OUTS/$@_out2.js
########################################################################
########################################################################
test01:: ; \
echo "//" `date` > OUTS/$@_out.js
############
test01:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
test01:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
test01:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_xatslib.js >> OUTS/$@_out.js
############
test01:: ; $(CAT) \
$(MYROOT)/prelude/DATS/CATS/JS/NODE/node000.cats >> OUTS/$@_out.js
############
test01:: \
test01_jsdasz0.dats; \
$(NODE)  --stack-size=8001  $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
########################################################################
########################################################################
test02:: ; \
echo "//" `date` > OUTS/$@_out.js
############
test02:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
test02:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
test02:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_xatslib.js >> OUTS/$@_out.js
############
test02:: ; $(CAT) \
$(MYROOT)/prelude/DATS/CATS/JS/NODE/node000.cats >> OUTS/$@_out.js
############
test02:: \
test02_jshmap0.dats; \
$(NODE)  --stack-size=8001  $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
########################################################################
########################################################################
test99:: ; \
echo "//" `date` > OUTS/$@_out.js
############
test99:: ; \
$(CAT) $(SRCGEN2_XSHARED)/xats2js_js1emit.js >> OUTS/$@_out.js
test99:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_prelude.js >> OUTS/$@_out.js
test99:: ; \
$(CAT) $(SRCGEN2_XSHARED)/srcgen2_xatslib.js >> OUTS/$@_out.js
############
test99:: ; $(CAT) \
$(MYROOT)/prelude/DATS/CATS/JS/NODE/node000.cats >> OUTS/$@_out.js
############
test99:: \
test99_mydiary.dats; \
$(NODE)  --stack-size=8001  $(SRCGEN2_XATS2JS) $< >> OUTS/$@_out.js
########################################################################
########################################################################
clean:: ; rm -f *~
cleanall:: ; rm -f *~
cleanall:: ; rm -f OUTS/test??_out.js
cleanall:: ; rm -f OUTS/test??_out?.js
########################################################################
########################################################################
###################### end of [Makefile_xjsemit] #######################
